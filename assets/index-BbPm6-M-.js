import{S as q,p as U,r as y,s as I,a as w,n as N,i as P,b as L,t as G,c as D,f as V,d as X,e as $,g as K,h as d,j as Y,u as Z,k as C,A as ee,l as R,m as n}from"./index-DIfnjtdG.js";var te=class extends q{constructor(e,t){super(),this.options=t,this.#s=e,this.#a=null,this.#i=U(),this.bindMethods(),this.setOptions(t)}#s;#e=void 0;#m=void 0;#t=void 0;#r;#u;#i;#a;#f;#h;#d;#o;#l;#n;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),z(this.#e,this.options)?this.#c():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return M(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return M(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#S(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,s=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof y(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#e.setOptions(this.options),t._defaulted&&!I(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const i=this.hasListeners();i&&B(this.#e,s,this.options,t)&&this.#c(),this.updateResult(),i&&(this.#e!==s||y(this.options.enabled,this.#e)!==y(t.enabled,this.#e)||w(this.options.staleTime,this.#e)!==w(t.staleTime,this.#e))&&this.#y();const r=this.#g();i&&(this.#e!==s||y(this.options.enabled,this.#e)!==y(t.enabled,this.#e)||r!==this.#n)&&this.#b(r)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),s=this.createResult(t,e);return ie(this,s)&&(this.#t=s,this.#u=this.options,this.#r=this.#e.state),s}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(s,i)=>(this.trackProp(i),t?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,i))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),s=this.#s.getQueryCache().build(this.#s,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#c({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#c(e){this.#w();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(N)),t}#y(){this.#v();const e=w(this.options.staleTime,this.#e);if(P||this.#t.isStale||!L(e))return;const s=G(this.#t.dataUpdatedAt,e)+1;this.#o=D.setTimeout(()=>{this.#t.isStale||this.updateResult()},s)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#b(e){this.#S(),this.#n=e,!(P||y(this.options.enabled,this.#e)===!1||!L(this.#n)||this.#n===0)&&(this.#l=D.setInterval(()=>{(this.options.refetchIntervalInBackground||V.isFocused())&&this.#c()},this.#n))}#x(){this.#y(),this.#b(this.#g())}#v(){this.#o&&(D.clearTimeout(this.#o),this.#o=void 0)}#S(){this.#l&&(D.clearInterval(this.#l),this.#l=void 0)}createResult(e,t){const s=this.#e,i=this.options,r=this.#t,o=this.#r,a=this.#u,u=e!==s?e.state:this.#m,{state:p}=e;let c={...p},h=!1,l;if(t._optimisticResults){const f=this.hasListeners(),T=!f&&z(e,t),S=f&&B(e,s,t,i);(T||S)&&(c={...c,...X(p.data,e.options)}),t._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:v}=c;l=c.data;let F=!1;if(t.placeholderData!==void 0&&l===void 0&&v==="pending"){let f;r?.isPlaceholderData&&t.placeholderData===a?.placeholderData?(f=r.data,F=!0):f=typeof t.placeholderData=="function"?t.placeholderData(this.#d?.state.data,this.#d):t.placeholderData,f!==void 0&&(v="success",l=$(r?.data,f,t),h=!0)}if(t.select&&l!==void 0&&!F)if(r&&l===o?.data&&t.select===this.#f)l=this.#h;else try{this.#f=t.select,l=t.select(l),l=$(r?.data,l,t),this.#h=l,this.#a=null}catch(f){this.#a=f}this.#a&&(m=this.#a,l=this.#h,g=Date.now(),v="error");const k=c.fetchStatus==="fetching",O=v==="pending",E=v==="error",_=O&&k,Q=l!==void 0,b={status:v,fetchStatus:c.fetchStatus,isPending:O,isSuccess:v==="success",isError:E,isInitialLoading:_,isLoading:_,data:l,dataUpdatedAt:c.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>u.dataUpdateCount||c.errorUpdateCount>u.errorUpdateCount,isFetching:k,isRefetching:k&&!O,isLoadingError:E&&!Q,isPaused:c.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:E&&Q,isStale:A(e,t),refetch:this.refetch,promise:this.#i,isEnabled:y(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const f=j=>{b.status==="error"?j.reject(b.error):b.data!==void 0&&j.resolve(b.data)},T=()=>{const j=this.#i=b.promise=U();f(j)},S=this.#i;switch(S.status){case"pending":e.queryHash===s.queryHash&&f(S);break;case"fulfilled":(b.status==="error"||b.data!==S.value)&&T();break;case"rejected":(b.status!=="error"||b.error!==S.reason)&&T();break}}return b}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#r=this.#e.state,this.#u=this.options,this.#r.data!==void 0&&(this.#d=this.#e),I(t,e))return;this.#t=t;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:i}=this.options,r=typeof i=="function"?i():i;if(r==="all"||!r&&!this.#p.size)return!0;const o=new Set(r??this.#p);return this.options.throwOnError&&o.add("error"),Object.keys(this.#t).some(a=>{const x=a;return this.#t[x]!==e[x]&&o.has(x)})};this.#R({listeners:s()})}#w(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#m=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#R(e){K.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function se(e,t){return y(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function z(e,t){return se(e,t)||e.state.data!==void 0&&M(e,t,t.refetchOnMount)}function M(e,t,s){if(y(t.enabled,e)!==!1&&w(t.staleTime,e)!=="static"){const i=typeof s=="function"?s(e):s;return i==="always"||i!==!1&&A(e,t)}return!1}function B(e,t,s,i){return(e!==t||y(i.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&A(e,s)}function A(e,t){return y(t.enabled,e)!==!1&&e.isStaleByTime(w(t.staleTime,e))}function ie(e,t){return!I(e.getCurrentResult(),t)}var W=d.createContext(!1),ae=()=>d.useContext(W);W.Provider;function ne(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var re=d.createContext(ne()),oe=()=>d.useContext(re),le=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},ce=e=>{d.useEffect(()=>{e.clearReset()},[e])},ue=({result:e,errorResetBoundary:t,throwOnError:s,query:i,suspense:r})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(r&&e.data===void 0||Y(s,[e.error,i])),he=e=>{if(e.suspense){const s=r=>r==="static"?r:Math.max(r??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...r)=>s(i(...r)):s(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},de=(e,t)=>e.isLoading&&e.isFetching&&!t,pe=(e,t)=>e?.suspense&&t.isPending,J=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function me(e,t,s){const i=ae(),r=oe(),o=Z(),a=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=i?"isRestoring":"optimistic",he(a),le(a,r),ce(r);const x=!o.getQueryCache().get(a.queryHash),[u]=d.useState(()=>new t(o,a)),p=u.getOptimisticResult(a),c=!i&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(h=>{const l=c?u.subscribe(K.batchCalls(h)):N;return u.updateResult(),l},[u,c]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),d.useEffect(()=>{u.setOptions(a)},[a,u]),pe(a,p))throw J(a,u,r);if(ue({result:p,errorResetBoundary:r,throwOnError:a.throwOnError,query:o.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw p.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(a,p),a.experimental_prefetchInRender&&!P&&de(p,i)&&(x?J(a,u,r):o.getQueryCache().get(a.queryHash)?.promise)?.catch(N).finally(()=>{u.updateResult()}),a.notifyOnChangeProps?p:u.trackResult(p)}function fe(e,t){return me(e,te)}/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ge=C("chevron-down",ye);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],xe=C("chevron-up",be);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Se=C("loader-circle",ve);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Re=C("search",we);function Te(e){const t=e.body||"",s=r=>{const o=new RegExp(`###\\s*${r}\\s*\\n\\s*(.+?)(?=\\n###|$)`,"is"),a=t.match(o);return a?a[1].trim():""},i=r=>{const o=r.match(/\[職缺\]\s*(.+?)\s*[-–]/);return o?o[1].trim():""};return{id:e.number,title:e.title,company:s("公司名稱")||i(e.title),position:s("職位名稱")||e.title,jobType:s("工作類型"),locationType:s("工作地點類型"),region:s("地區 Region"),location:s("工作地點"),salary:s("薪資範圍"),description:s("職位描述"),contact:s("聯絡方式"),url:e.html_url,createdAt:e.created_at,labels:e.labels.map(r=>r.name)}}new Date(Date.now()-1e3*60*60*24).toISOString(),new Date(Date.now()-1e3*60*60*24*2).toISOString(),new Date(Date.now()-1e3*60*60*24*3).toISOString(),new Date(Date.now()-1e3*60*60*24*5).toISOString(),new Date(Date.now()-1e3*60*60*24*7).toISOString(),new Date(Date.now()-1e3*60*60*24*10).toISOString(),new Date(Date.now()-1e3*60*60*24*14).toISOString(),new Date(Date.now()-1e3*60*60*24*20).toISOString(),new Date(Date.now()-1e3*60*60*24*25).toISOString(),new Date(Date.now()-1e3*60*60*24*30).toISOString();async function je(){const e={Accept:"application/vnd.github.v3+json"},t=await fetch(`${ee}?state=open&labels=job,approved&per_page=100`,{headers:e});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return(await t.json()).map(Te)}function De(){const{data:e,isLoading:t,error:s,refetch:i}=fe({queryKey:["jobs"],queryFn:je});return{jobs:e??[],loading:t,error:s?s.message:null,refetch:i}}function Ce(e,t){const s=new Date(e),r=Math.abs(new Date().getTime()-s.getTime()),o=Math.floor(r/(1e3*60*60*24));return o===0?t.today:o===1?t.yesterday:o<7?t.daysAgo(o):o<30?t.weeksAgo(Math.floor(o/7)):s.toLocaleDateString()}function ke({job:e}){const{t}=R();return n.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-lg transition-all hover:-translate-y-1",children:[n.jsxs("div",{className:"mb-3",children:[n.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-1",children:e.position||e.title}),n.jsx("p",{className:"text-slate-600 font-medium",children:e.company})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.locationType&&n.jsx("span",{className:"px-3 py-1 bg-cyan-50 text-cyan-700 rounded-full text-sm font-medium",children:e.locationType}),e.location&&n.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-sm font-medium",children:e.location}),e.jobType&&n.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-sm font-medium",children:e.jobType}),e.salary&&n.jsx("span",{className:"px-3 py-1 bg-green-50 text-green-700 rounded-full text-sm font-medium",children:e.salary})]}),e.description&&n.jsx("div",{className:"text-slate-600 text-sm mb-4 line-clamp-3",children:e.description.split(`
`).slice(0,3).map((s,i)=>n.jsx("p",{children:s},i))}),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-100",children:[n.jsx("span",{className:"text-slate-500 text-sm",children:Ce(e.createdAt,t.job)}),n.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-colors text-sm font-medium",children:[t.job.viewDetails," →"]})]})]})}function Oe({value:e,onChange:t}){const{t:s}=R();return n.jsxs("div",{className:"relative",children:[n.jsx(Re,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),n.jsx("input",{type:"text",value:e,onChange:i=>t(i.target.value),placeholder:s.filters.search,className:"w-full pl-12 pr-4 py-3 border-2 border-slate-200 rounded-lg focus:outline-none focus:border-cyan-500 transition-colors"})]})}const Ee=["all","remote","full-time","part-time","internship"],Ie={all:"all",remote:"remote","full-time":"fullTime","part-time":"partTime",internship:"internship"};function Ne({activeFilter:e,onFilterChange:t}){const{t:s}=R();return n.jsx("div",{className:"flex gap-2 flex-wrap",children:Ee.map(i=>n.jsx("button",{type:"button",onClick:()=>t(i),className:`px-5 py-2 rounded-full font-medium transition-all ${e===i?"bg-cyan-600 text-white":"bg-white border-2 border-slate-200 text-slate-700 hover:border-cyan-600 hover:text-cyan-600"}`,children:s.filters[Ie[i]]},i))})}const H={all:["all"],asia:["taiwan","china","japan","korea","singapore","hongkong","india","thailand","vietnam","malaysia","indonesia","philippines"],americas:["us","canada","mexico","brazil","argentina"],europe:["uk","germany","france","netherlands","switzerland","sweden","ireland","spain","italy","poland"],oceania:["australia","newzealand"],africa:["southafrica","uae","israel","others"]},Pe=["all","asia","americas","europe","oceania","africa"];function Me({activeRegion:e,onRegionChange:t}){const{t:s}=R(),[i,r]=d.useState(null),o=a=>{a==="all"?(t("all"),r(null)):r(i===a?null:a)};return n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex gap-2 flex-wrap",children:Pe.map(a=>n.jsxs("button",{type:"button",onClick:()=>o(a),className:`px-4 py-2 rounded-full font-medium transition-all flex items-center gap-1 ${a==="all"&&e==="all"||a!=="all"&&i===a&&H[a].includes(e)?"bg-cyan-600 text-white":"bg-white border-2 border-slate-200 text-slate-700 hover:border-cyan-600 hover:text-cyan-600"}`,children:[n.jsx("span",{children:s.continents[a]}),a!=="all"&&n.jsx("span",{className:"ml-1",children:i===a?n.jsx(xe,{size:16}):n.jsx(ge,{size:16})})]},a))}),i&&i!=="all"&&n.jsx("div",{className:"flex gap-2 flex-wrap pl-4 animate-in fade-in slide-in-from-top-2 duration-200",children:H[i].map(a=>n.jsx("button",{type:"button",onClick:()=>t(a),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${e===a?"bg-cyan-500 text-white":"bg-slate-100 text-slate-700 hover:bg-cyan-100 hover:text-cyan-700"}`,children:s.regions[a]},a))})]})}const Ae={all:[],taiwan:["taiwan","台灣"],china:["china","中國","prc"],japan:["japan","日本"],korea:["korea","韓國","south korea"],singapore:["singapore","新加坡"],hongkong:["hong kong","香港","hk"],india:["india","印度"],thailand:["thailand","泰國"],vietnam:["vietnam","越南"],malaysia:["malaysia","馬來西亞"],indonesia:["indonesia","印尼","印度尼西亞"],philippines:["philippines","菲律賓"],us:["united states","美國","usa","u.s."],canada:["canada","加拿大"],mexico:["mexico","墨西哥"],brazil:["brazil","巴西"],argentina:["argentina","阿根廷"],uk:["united kingdom","英國","britain","u.k."],germany:["germany","德國"],france:["france","法國"],netherlands:["netherlands","荷蘭"],switzerland:["switzerland","瑞士"],sweden:["sweden","瑞典"],ireland:["ireland","愛爾蘭"],spain:["spain","西班牙"],italy:["italy","義大利"],poland:["poland","波蘭"],australia:["australia","澳洲","澳大利亞"],newzealand:["new zealand","紐西蘭"],southafrica:["south africa","南非"],uae:["uae","阿聯酋","united arab emirates","dubai"],israel:["israel","以色列"],others:["others","其他"]};function Fe(e,t){if(t==="all")return!0;const s=e.region.toLowerCase();return Ae[t].some(r=>s.includes(r))}function Ue(){const{t:e}=R(),{jobs:t,loading:s,error:i}=De(),[r,o]=d.useState(""),[a,x]=d.useState("all"),[u,p]=d.useState("all"),c=d.useMemo(()=>{let h=t;if(h=h.filter(l=>Fe(l,u)),a!=="all"&&(h=h.filter(l=>{const m=l.locationType.toLowerCase(),g=l.jobType.toLowerCase();switch(a){case"remote":return m.includes("remote")||m.includes("遠端");case"full-time":return g.includes("full")||g.includes("全職");case"part-time":return g.includes("part")||g.includes("兼職");case"internship":return g.includes("intern")||g.includes("實習");default:return!0}})),r){const l=r.toLowerCase();h=h.filter(m=>`
          ${m.title}
          ${m.company}
          ${m.position}
          ${m.location}
          ${m.region}
          ${m.description}
        `.toLowerCase().includes(l))}return h},[t,a,u,r]);return s?n.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[n.jsx(Se,{className:"animate-spin text-cyan-600 mb-4",size:48}),n.jsx("p",{className:"text-slate-600",children:e.messages.loading})]}):i?n.jsxs("div",{className:"text-center py-20",children:[n.jsx("p",{className:"text-red-600 text-lg",children:e.messages.loadError}),n.jsx("p",{className:"text-slate-500 mt-2",children:i})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-5 mb-8",children:[n.jsx(Oe,{value:r,onChange:o}),n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-600 mb-2",children:e.filters.region}),n.jsx(Me,{activeRegion:u,onRegionChange:p})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-600 mb-2",children:e.filters.jobType}),n.jsx(Ne,{activeFilter:a,onFilterChange:x})]})]}),c.length===0?n.jsx("div",{className:"text-center py-20",children:n.jsx("p",{className:"text-slate-500 text-lg",children:e.messages.noResults})}):n.jsx("div",{className:"grid gap-5",children:c.map(h=>n.jsx(ke,{job:h},h.id))})]})}export{Ue as component};
